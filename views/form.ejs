<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Upload Form</title>
    <script
      src="https://widget.cloudinary.com/v2.0/global/all.js"
      type="text/javascript"
    ></script>
    <style>
      body {
        font-family: "Roboto Condensed", sans-serif;
        background: url("/images/image.png") no-repeat center center fixed;
        background-size: cover;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
        padding: 16px;
        box-sizing: border-box;
      }

      .card {
        border: 1px solid #000000;
        padding: 32px;
        border-radius: 8px;
        max-width: 100%;
        background-color: #ffffff;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        text-align: center;
        width: 100%;
        max-width: 400px;
        box-sizing: border-box;
      }

      .card h1 {
        margin-bottom: 24px;
        font-size: 1.5em;
      }

      .card label {
        display: block;
        margin-top: 16px;
        text-align: left;
        font-size: 1em;
      }

      .card input[type="text"],
      .card textarea {
        width: 100%;
        padding: 8px;
        margin-top: 8px;
        border: 1px solid #ccc;
        border-radius: 4px;
        font-size: 1em;
        box-sizing: border-box;
      }

      .image-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 16px;
        margin-top: 16px;
      }

      .image-grid div {
        position: relative;
      }

      .image-grid button {
        width: 100%;
        height: 100px; /* Adjust height as needed */
        background-color: transparent;
        border: 2px solid #28a745;
        border-radius: 4px;
        cursor: pointer;
        padding: 0;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .image-grid button img {
        max-width: 100%;
        max-height: 100%;
      }

      .image-grid button:hover {
        border-color: #218838;
      }

      .card button[type="submit"] {
        width: 100%;
        padding: 12px;
        background-color: #007bff;
        border: none;
        border-radius: 4px;
        color: white;
        font-size: 16px;
        cursor: pointer;
        margin-top: 24px;
      }

      .card button[type="submit"]:hover {
        background-color: #0056b3;
      }

      @media (max-width: 480px) {
        .card {
          padding: 16px;
        }

        .card button[type="submit"],
        .image-grid button {
          font-size: 14px;
          padding: 10px;
        }

        .image-grid {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <div class="card">
      <h1>Upload Form</h1>
      <form action="/submit" method="POST">
        <div class="image-grid">
          <div>
            <input type="hidden" name="imageUrl1" id="imageUrl1" />
            <button type="button" id="upload_widget1">
              <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTCOC4VwUh57pZbARAD0QmGAmIeh-AdbK0sgA&usqp=CAU" alt="Upload Image 1" />
            </button>
          </div>
          <div>
            <input type="hidden" name="imageUrl2" id="imageUrl2" />
            <button type="button" id="upload_widget2">
              <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTCOC4VwUh57pZbARAD0QmGAmIeh-AdbK0sgA&usqp=CAU" alt="Upload Image 2" />
            </button>
          </div>
          <div>
            <input type="hidden" name="imageUrl3" id="imageUrl3" />
            <button type="button" id="upload_widget3">
              <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTCOC4VwUh57pZbARAD0QmGAmIeh-AdbK0sgA&usqp=CAU" alt="Upload Image 3" />
            </button>
          </div>
          <div>
            <input type="hidden" name="imageUrl4" id="imageUrl4" />
            <button type="button" id="upload_widget4">
              <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTCOC4VwUh57pZbARAD0QmGAmIeh-AdbK0sgA&usqp=CAU" alt="Upload Image 4" />
            </button>
          </div>
        </div>
        <div>
          <label for="price">Price:</label>
          <input type="text" name="price" id="price" required />
        </div>
        <div>
          <label for="description">Description:</label>
          <textarea name="description" id="description" required></textarea>
        </div>
        <button type="submit">Submit</button>
      </form>
    </div>

    <script type="text/javascript">
      function createUploadWidget(buttonId, inputId) {
        return cloudinary.createUploadWidget(
          {
            cloudName: "<%= cloudinaryCloudName %>",
            uploadPreset: "qpzqch4m", // Replace with your unsigned upload preset
          },
          (error, result) => {
            if (!error && result && result.event === "success") {
              console.log("Done! Here is the image info: ", result.info);
              document.getElementById(inputId).value = result.info.secure_url;
              document.querySelector(`#${buttonId} img`).src = result.info.secure_url;
            }
          }
        );
      }

      const widgets = [
        { buttonId: "upload_widget1", inputId: "imageUrl1" },
        { buttonId: "upload_widget2", inputId: "imageUrl2" },
        { buttonId: "upload_widget3", inputId: "imageUrl3" },
        { buttonId: "upload_widget4", inputId: "imageUrl4" },
      ];

      widgets.forEach(widget => {
        const myWidget = createUploadWidget(widget.buttonId, widget.inputId);
        document.getElementById(widget.buttonId).addEventListener(
          "click",
          function () {
            myWidget.open();
          },
          false
        );
      });
    </script>
  </body>
</html>
